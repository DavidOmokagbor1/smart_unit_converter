<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Inline styles noted for refactoring -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Unit Converter - Mobile Web</title>
    
    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; connect-src 'self' https://api.trusted.com; img-src 'self' data: https:; font-src 'self' https://cdnjs.cloudflare.com;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }
        
        .container {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 1.8em;
            margin-bottom: 5px;
            font-weight: 700;
        }
        
        .header p {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        .content {
            padding: 20px;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .input-group input, .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #4facfe;
        }
        
        .convert-btn {
            width: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s ease;
            margin-bottom: 20px;
        }
        
        .convert-btn:hover {
            transform: translateY(-2px);
        }
        
        .result {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .result h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .result-value {
            font-size: 2em;
            font-weight: bold;
            color: #4facfe;
            word-break: break-all;
        }
        
        .categories {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .category-btn {
            padding: 10px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 14px;
        }
        
        .category-btn.active {
            background: #4facfe;
            color: white;
            border-color: #4facfe;
        }
        
        .category-btn:hover {
            border-color: #4facfe;
        }
        
        .footer {
            background: #f8f9fa;
            padding: 15px;
            text-align: center;
            color: #6c757d;
            font-size: 0.9em;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            border: 1px solid #f5c6cb;
        }
        
        .success {
            background: #d4edda;
            color: #155724;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            border: 1px solid #c3e6cb;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üì± Smart Unit Converter</h1>
            <p>Mobile Web Version</p>
        </div>
        
        <div class="content">
            <!-- Category Selection -->
            <div class="input-group">
                <label>Category:</label>
                <div class="categories">
                    <button class="category-btn active" data-category="length">üìè Length</button>
                    <button class="category-btn" data-category="weight">‚öñÔ∏è Weight</button>
                    <button class="category-btn" data-category="temperature">üå°Ô∏è Temperature</button>
                    <button class="category-btn" data-category="volume">üß™ Volume</button>
                    <button class="category-btn" data-category="area">üìê Area</button>
                    <button class="category-btn" data-category="speed">üöÄ Speed</button>
                </div>
            </div>
            
            <!-- Input Value -->
            <div class="input-group">
                <label for="fromValue">Enter Value:</label>
                <input type="number" id="fromValue" placeholder="Enter a number" step="any">
            </div>
            
            <!-- From Unit -->
            <div class="input-group">
                <label for="fromUnit">From Unit:</label>
                <select id="fromUnit">
                    <option value="">Select unit</option>
                </select>
            </div>
            
            <!-- To Unit -->
            <div class="input-group">
                <label for="toUnit">To Unit:</label>
                <select id="toUnit">
                    <option value="">Select unit</option>
                </select>
            </div>
            
            <!-- Convert Button -->
            <button class="convert-btn" onclick="convert()">üîÑ Convert</button>
            
            <!-- Result -->
            <div class="result" id="result" style="display: none;">
                <h3>Result:</h3>
                <div class="result-value" id="resultValue">0</div>
            </div>
            
            <!-- Error/Success Messages -->
            <div id="message"></div>
        </div>
        
        <div class="footer">
            <p>Smart Unit Converter - Mobile Web Version</p>
            <p>Works without Expo Go!</p>
        </div>
    </div>

    <script>
        // Conversion data
        const conversionData = {
            length: {
                units: {
                    'meter': { name: 'Meter', factor: 1 },
                    'kilometer': { name: 'Kilometer', factor: 1000 },
                    'centimeter': { name: 'Centimeter', factor: 0.01 },
                    'millimeter': { name: 'Millimeter', factor: 0.001 },
                    'inch': { name: 'Inch', factor: 0.0254 },
                    'foot': { name: 'Foot', factor: 0.3048 },
                    'yard': { name: 'Yard', factor: 0.9144 },
                    'mile': { name: 'Mile', factor: 1609.34 }
                }
            },
            weight: {
                units: {
                    'kilogram': { name: 'Kilogram', factor: 1 },
                    'gram': { name: 'Gram', factor: 0.001 },
                    'pound': { name: 'Pound', factor: 0.453592 },
                    'ounce': { name: 'Ounce', factor: 0.0283495 },
                    'ton': { name: 'Ton', factor: 1000 }
                }
            },
            temperature: {
                units: {
                    'celsius': { name: 'Celsius', factor: 1, offset: 0 },
                    'fahrenheit': { name: 'Fahrenheit', factor: 5/9, offset: -32 },
                    'kelvin': { name: 'Kelvin', factor: 1, offset: -273.15 }
                }
            },
            volume: {
                units: {
                    'liter': { name: 'Liter', factor: 1 },
                    'milliliter': { name: 'Milliliter', factor: 0.001 },
                    'gallon': { name: 'Gallon (US)', factor: 3.78541 },
                    'quart': { name: 'Quart (US)', factor: 0.946353 },
                    'pint': { name: 'Pint (US)', factor: 0.473176 },
                    'cup': { name: 'Cup (US)', factor: 0.236588 }
                }
            },
            area: {
                units: {
                    'square_meter': { name: 'Square Meter', factor: 1 },
                    'square_kilometer': { name: 'Square Kilometer', factor: 1000000 },
                    'square_foot': { name: 'Square Foot', factor: 0.092903 },
                    'square_inch': { name: 'Square Inch', factor: 0.00064516 },
                    'acre': { name: 'Acre', factor: 4046.86 },
                    'hectare': { name: 'Hectare', factor: 10000 }
                }
            },
            speed: {
                units: {
                    'meter_per_second': { name: 'Meter/Second', factor: 1 },
                    'kilometer_per_hour': { name: 'Kilometer/Hour', factor: 0.277778 },
                    'mile_per_hour': { name: 'Mile/Hour', factor: 0.44704 },
                    'foot_per_second': { name: 'Foot/Second', factor: 0.3048 },
                    'knot': { name: 'Knot', factor: 0.514444 }
                }
            }
        };
        
        let currentCategory = 'length';
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            updateUnits();
            setupEventListeners();
        });
        
        function setupEventListeners() {
            // Category buttons
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentCategory = this.dataset.category;
                    updateUnits();
                });
            });
        }
        
        function updateUnits() {
            const fromUnit = document.getElementById('fromUnit');
            const toUnit = document.getElementById('toUnit');
            const units = conversionData[currentCategory].units;
            
            // Clear existing options
            fromUnit.innerHTML = '<option value="">Select unit</option>';
            toUnit.innerHTML = '<option value="">Select unit</option>';
            
            // Add units
            Object.keys(units).forEach(unit => {
                const option1 = document.createElement('option');
                option1.value = unit;
                option1.textContent = units[unit].name;
                fromUnit.appendChild(option1);
                
                const option2 = document.createElement('option');
                option2.value = unit;
                option2.textContent = units[unit].name;
                toUnit.appendChild(option2);
            });
        }
        
        function convert() {
            const fromValue = parseFloat(document.getElementById('fromValue').value);
            const fromUnit = document.getElementById('fromUnit').value;
            const toUnit = document.getElementById('toUnit').value;
            const resultDiv = document.getElementById('result');
            const resultValue = document.getElementById('resultValue');
            const messageDiv = document.getElementById('message');
            
            // Clear previous messages
            messageDiv.innerHTML = '';
            
            // Validation
            if (!fromValue || isNaN(fromValue)) {
                showMessage('Please enter a valid number', 'error');
                return;
            }
            
            if (!fromUnit || !toUnit) {
                showMessage('Please select both units', 'error');
                return;
            }
            
            if (fromUnit === toUnit) {
                showMessage('Please select different units', 'error');
                return;
            }
            
            try {
                let result;
                
                if (currentCategory === 'temperature') {
                    // Special handling for temperature
                    result = convertTemperature(fromValue, fromUnit, toUnit);
                } else {
                    // Standard conversion
                    const fromFactor = conversionData[currentCategory].units[fromUnit].factor;
                    const toFactor = conversionData[currentCategory].units[toUnit].factor;
                    result = (fromValue * fromFactor) / toFactor;
                }
                
                // Format result
                const formattedResult = formatNumber(result);
                resultValue.textContent = formattedResult;
                resultDiv.style.display = 'block';
                
                showMessage('Conversion successful!', 'success');
                
            } catch (error) {
                showMessage('Conversion error: ' + error.message, 'error');
            }
        }
        
        function convertTemperature(value, fromUnit, toUnit) {
            // Convert to Celsius first
            let celsius;
            if (fromUnit === 'celsius') {
                celsius = value;
            } else if (fromUnit === 'fahrenheit') {
                celsius = (value - 32) * 5/9;
            } else if (fromUnit === 'kelvin') {
                celsius = value - 273.15;
            }
            
            // Convert from Celsius to target unit
            if (toUnit === 'celsius') {
                return celsius;
            } else if (toUnit === 'fahrenheit') {
                return (celsius * 9/5) + 32;
            } else if (toUnit === 'kelvin') {
                return celsius + 273.15;
            }
        }
        
        function formatNumber(num) {
            if (Math.abs(num) < 0.001 || Math.abs(num) > 1000000) {
                return num.toExponential(6);
            }
            return parseFloat(num.toFixed(6)).toString();
        }
        
        function showMessage(message, type) {
            const messageDiv = document.getElementById('message');
            messageDiv.innerHTML = `<div class="${type}">${message}</div>`;
        }
        
        // Input validation
        function sanitizeInput(input) {
            if (typeof input !== 'string') return '';
            return input.replace(/[<>\"'&]/g, function(match) {
                const escapeMap = {
                    '<': '&lt;', '>': '&gt;', '"': '&quot;',
                    "'": '&#x27;', '&': '&amp;'
                };
                return escapeMap[match];
            }).trim();
        }
        
        function validateNumericInput(input) {
            const sanitized = sanitizeInput(input);
            if (!sanitized) return { isValid: false, value: null, error: 'Input cannot be empty' };
            
            const numberRegex = /^-?(\d+\.?\d*|\.\d+)([eE][+-]?\d+)?$/;
            if (!numberRegex.test(sanitized)) {
                return { isValid: false, value: null, error: 'Invalid number format' };
            }
            
            const numValue = parseFloat(sanitized);
            if (Math.abs(numValue) > 1e15) {
                return { isValid: false, value: null, error: 'Number too large' };
            }
            
            return { isValid: true, value: numValue, error: null };
        }
    </script>
</body>
</html>



