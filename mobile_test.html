<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Unit Converter - Mobile Test</title>
    
    <!-- Security Headers - REQUIRED FOR ALL PROJECTS -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; connect-src 'self' https://api.trusted.com; img-src 'self' data: https:; font-src 'self' https://cdnjs.cloudflare.com;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .title {
            color: white;
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .subtitle {
            color: rgba(255, 255, 255, 0.8);
            font-size: 16px;
        }

        .card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            color: #ffd700;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .selector {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 15px;
            color: white;
            font-size: 16px;
            width: 100%;
            margin-bottom: 10px;
        }

        .input {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 15px;
            color: white;
            font-size: 18px;
            width: 100%;
            margin-bottom: 20px;
        }

        .input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .convert-button {
            background: linear-gradient(45deg, #ff6b6b, #ffd700);
            border: none;
            border-radius: 15px;
            padding: 18px;
            color: white;
            font-size: 18px;
            font-weight: bold;
            width: 100%;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
            transition: transform 0.2s;
        }

        .convert-button:hover {
            transform: translateY(-2px);
        }

        .result {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            color: white;
            font-size: 24px;
            font-weight: bold;
            margin-top: 20px;
        }

        .categories {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .category {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            color: white;
            cursor: pointer;
            transition: all 0.2s;
        }

        .category:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .category.active {
            background: rgba(255, 215, 0, 0.3);
            border-color: #ffd700;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="title">‚ú® Smart Unit Converter</div>
            <div class="subtitle">Convert between 15+ categories with 120+ units</div>
        </div>

        <div class="card">
            <div class="section-title">üìÅ Category</div>
            <div class="categories">
                <div class="category active" data-category="length">üìè Length</div>
                <div class="category" data-category="weight">‚öñÔ∏è Weight</div>
                <div class="category" data-category="temperature">üå°Ô∏è Temperature</div>
                <div class="category" data-category="area">üìê Area</div>
                <div class="category" data-category="volume">üß™ Volume</div>
                <div class="category" data-category="time">‚è∞ Time</div>
            </div>
        </div>

        <div class="card">
            <div class="section-title">From</div>
            <select class="selector" id="fromUnit">
                <option value="meter">Meter (m)</option>
                <option value="kilometer">Kilometer (km)</option>
                <option value="centimeter">Centimeter (cm)</option>
                <option value="millimeter">Millimeter (mm)</option>
                <option value="inch">Inch (in)</option>
                <option value="foot">Foot (ft)</option>
                <option value="yard">Yard (yd)</option>
                <option value="mile">Mile (mi)</option>
            </select>
        </div>

        <div class="card">
            <div class="section-title">To</div>
            <select class="selector" id="toUnit">
                <option value="meter">Meter (m)</option>
                <option value="kilometer">Kilometer (km)</option>
                <option value="centimeter">Centimeter (cm)</option>
                <option value="millimeter">Millimeter (mm)</option>
                <option value="inch">Inch (in)</option>
                <option value="foot">Foot (ft)</option>
                <option value="yard">Yard (yd)</option>
                <option value="mile">Mile (mi)</option>
            </select>
        </div>

        <div class="card">
            <div class="section-title">Value</div>
            <input type="number" class="input" id="value" placeholder="Enter value to convert">
        </div>

        <button class="convert-button" onclick="convert()">üîÑ Convert</button>

        <div class="result" id="result" style="display: none;"></div>
    </div>

    <script>
        // Input validation
        function sanitizeInput(input) {
            if (typeof input !== 'string') return '';
            return input.replace(/[<>\"'&]/g, function(match) {
                const escapeMap = {
                    '<': '&lt;', '>': '&gt;', '"': '&quot;',
                    "'": '&#x27;', '&': '&amp;'
                };
                return escapeMap[match];
            }).trim();
        }

        function validateNumericInput(input) {
            const sanitized = sanitizeInput(input);
            if (!sanitized) return { isValid: false, value: null, error: 'Input cannot be empty' };
            
            const numberRegex = /^-?(\d+\.?\d*|\.\d+)([eE][+-]?\d+)?$/;
            if (!numberRegex.test(sanitized)) {
                return { isValid: false, value: null, error: 'Invalid number format' };
            }
            
            const numValue = parseFloat(sanitized);
            if (Math.abs(numValue) > 1e15) {
                return { isValid: false, value: null, error: 'Number too large' };
            }
            
            return { isValid: true, value: numValue, error: null };
        }

        // Conversion functions
        const conversions = {
            length: {
                meter: 1,
                kilometer: 1000,
                centimeter: 0.01,
                millimeter: 0.001,
                inch: 0.0254,
                foot: 0.3048,
                yard: 0.9144,
                mile: 1609.34
            },
            weight: {
                gram: 1,
                kilogram: 1000,
                pound: 453.592,
                ounce: 28.3495,
                ton: 1000000
            },
            temperature: {
                celsius: 1,
                fahrenheit: 1,
                kelvin: 1
            }
        };

        function convert() {
            const value = document.getElementById('value').value;
            const fromUnit = document.getElementById('fromUnit').value;
            const toUnit = document.getElementById('toUnit').value;
            
            // Validate input
            const validation = validateNumericInput(value);
            if (!validation.isValid) {
                alert(validation.error);
                return;
            }
            
            const numValue = validation.value;
            
            // Simple conversion for length
            if (fromUnit && toUnit && conversions.length[fromUnit] && conversions.length[toUnit]) {
                const result = (numValue * conversions.length[fromUnit]) / conversions.length[toUnit];
                document.getElementById('result').textContent = `${result.toFixed(6)} ${toUnit}`;
                document.getElementById('result').style.display = 'block';
            } else {
                alert('Please select valid units');
            }
        }

        // Category selection
        document.querySelectorAll('.category').forEach(category => {
            category.addEventListener('click', function() {
                document.querySelectorAll('.category').forEach(c => c.classList.remove('active'));
                this.classList.add('active');
                
                // Update units based on category
                const categoryType = this.dataset.category;
                updateUnits(categoryType);
            });
        });

        function updateUnits(category) {
            const fromSelect = document.getElementById('fromUnit');
            const toSelect = document.getElementById('toUnit');
            
            // Clear existing options
            fromSelect.innerHTML = '';
            toSelect.innerHTML = '';
            
            let units = [];
            if (category === 'length') {
                units = [
                    { value: 'meter', text: 'Meter (m)' },
                    { value: 'kilometer', text: 'Kilometer (km)' },
                    { value: 'centimeter', text: 'Centimeter (cm)' },
                    { value: 'millimeter', text: 'Millimeter (mm)' },
                    { value: 'inch', text: 'Inch (in)' },
                    { value: 'foot', text: 'Foot (ft)' },
                    { value: 'yard', text: 'Yard (yd)' },
                    { value: 'mile', text: 'Mile (mi)' }
                ];
            } else if (category === 'weight') {
                units = [
                    { value: 'gram', text: 'Gram (g)' },
                    { value: 'kilogram', text: 'Kilogram (kg)' },
                    { value: 'pound', text: 'Pound (lb)' },
                    { value: 'ounce', text: 'Ounce (oz)' },
                    { value: 'ton', text: 'Ton (t)' }
                ];
            }
            
            units.forEach(unit => {
                const option1 = new Option(unit.text, unit.value);
                const option2 = new Option(unit.text, unit.value);
                fromSelect.add(option1);
                toSelect.add(option2);
            });
        }
    </script>
</body>
</html>
